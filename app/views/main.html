<div class="container">
    <div ng-include="'views/partials/error.html'"></div>
    <h3>Control <img src="images/preloader_small.gif" alt="loading" ng-show="switchDevice.data && switchDevice.loading"/></h3>
    <div class="row" style="text-align: center" ng-show="!switchDevice.data">
        <img src="images/preloader.gif" alt="loading" style="float: none; margin: 0 auto"/>
    </div>
    <div ng-repeat="group in switchDevice.data">

        <h4>{{ group.name }}</h4>
        <div class="row" ng-repeat="(key, switch) in group.switches">
            <div class="col-xs-4">
                {{ switch.name }}
                <small ng-show="switch.scheduled && 'two_way' != switch.type"><br/>
                    <span class="label" ng-class="{'label-danger': '0' == switch.scheduled.state, 'label-success': '1' == switch.scheduled.state}">
                        {{ '1' == switch.scheduled.state ? 'On': 'Off' }}
                    </span>&nbsp;
                    {{ switch.scheduled.when | date : 'shortTime' }}
                </small>
            </div>
            <div class="col-xs-8">
                <div class="btn-group" role="group" ng-if="'two_way' == switch.type">
                    <button type="button" class="btn btn-lg btn-info" ng-disabled="loading" ng-click="toggleSwitch(key, 'up')">
                        &nbsp;<span class="glyphicon glyphicon-circle-arrow-up"></span>&nbsp;
                    </button>
                    <button type="button" class="btn btn-lg btn-info" ng-disabled="loading" ng-click="toggleSwitch(key, 'stop')">
                        &nbsp;<span class="glyphicon glyphicon-remove-circle"></span>&nbsp;
                    </button>
                    <button type="button" class="btn btn-lg btn-info" ng-disabled="loading" ng-click="toggleSwitch(key, 'down')">
                        &nbsp;<span class="glyphicon glyphicon-circle-arrow-down"></span>&nbsp;
                    </button>
                </div>
                <div class="btn-group" role="group" ng-if="'two_way' != switch.type">
                    <button type="button" class="btn btn-lg" ng-disabled="loading"
                            ng-class="{'label-danger': '0' == switch.state, 'label-success': '1' == switch.state}"
                            ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1')">
                        &nbsp;<span class="glyphicon" ng-class="{'glyphicon-off': '1' == switch.state, 'glyphicon-play-circle': '0' == switch.state}"></span>&nbsp;
                    </button>
                    <div class="btn-group">
                        <button type="button" ng-disabled="loading" class="btn btn-lg dropdown-toggle" data-toggle="dropdown"
                                ng-class="{'label-danger': '0' == switch.state, 'label-success': '1' == switch.state}">
                            &nbsp;<span class="glyphicon glyphicon-time"></span>&nbsp;
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 15)">15 minutes</a></li>
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 30)">30 minutes</a></li>
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 3*60)">3 hours</a></li>
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 6*60)">6 hours</a></li>
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 12*60)">12 hours</a></li>
                            <li><a ng-click="toggleSwitch(key, '1' == switch.state ? '0' : '1', 0)">X hours</a></li>
                        </ul>
                    </div>
                </div>
                <br/>
                <br/>
            </div>
        </div>
    </div>
    <h3>Sensors <img src="images/preloader_small.gif" alt="loading" ng-show="sensorDevice.data && sensorDevice.loading"/></h3>
    <div class="row" style="text-align: center" ng-show="!sensorDevice.data">
        <img src="images/preloader.gif" alt="loading" style="float: none; margin: 0 auto"/>
    </div>
    <div class="row">
        <div ng-repeat="sensor in sensorDevice.data" class="col-xs-4">
            <div class="well" ng-class="{ 'text-danger': sensor.value <= 0, 'text-warning': sensor.value < 4 && sensor.value > 0 }">{{ sensor.value }}&deg;C<br/>{{ sensor.name }}</div>
        </div>
    </div>
    <div class="row" ng-include="'views/partials/update.html'"></div>
</div>
